"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5652],{1992:(k,O,l)=>{l.d(O,{Z:()=>a});var c=l(655),e=l(5e3),d=l(4433),b=l(6858),_=l(4182);let x=(()=>{class t{constructor(n,i){this.modalController=n,this.http=i}ngOnInit(){}dismiss(){this.modalController.dismiss({dismissed:!0})}sendMessage(){this.http.sendMessageFromUser({id:this.chatId,type:"image",message:this.newMessage,image:this.image.split(";base64,")[1]}).subscribe(n=>{"success"===n.status?(this.newMessage="",this.dismiss()):this.http.toaster("something went horribly wrong, please format your system, contact your lawyer and get a new identity",3e3,"warning")},n=>{console.error(n),this.http.toaster("failed to send message, please check your internet connection",3e3,"warning")})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.IN),e.Y36(b.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-image-upload-preview"]],inputs:{image:"image",chatId:"chatId"},decls:17,vars:2,consts:[[1,"container"],[1,"header"],[1,"close",3,"click"],["name","close-outline"],[1,"edit-icons"],["name","happy-outline"],["name","document-outline"],["name","text-outline"],[1,"image-preview"],["alt","",1,"h-100","w-100",3,"src"],[1,"message"],[1,"text","form-group"],["type","text","name","message","placeholder","Type a message",1,"form-control","text-white",3,"ngModel","ngModelChange"],[1,"send-icon"],[1,"btn","btn-success","btn-round"],["name","send",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return i.dismiss()}),e._UZ(3,"ion-icon",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"ion-icon",5)(6,"ion-icon",6)(7,"ion-icon",7),e.qZA()(),e.TgZ(8,"div",8),e._UZ(9,"img",9),e.qZA(),e.TgZ(10,"div",10)(11,"div",11)(12,"input",12),e.NdJ("ngModelChange",function(g){return i.newMessage=g}),e.qZA()()(),e.TgZ(13,"div",13),e._UZ(14,"hr"),e.TgZ(15,"button",14)(16,"ion-icon",15),e.NdJ("click",function(){return i.sendMessage()}),e.qZA()()()()),2&n&&(e.xp6(9),e.Q6J("src",i.image,e.LSH),e.xp6(3),e.Q6J("ngModel",i.newMessage))},directives:[d.gu,_.Fj,_.JJ,_.On],styles:["ion-icon[_ngcontent-%COMP%]{color:#dcdcdc;font-size:27px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:space-around}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:left}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .edit-icons[_ngcontent-%COMP%]{width:100%;text-align:right}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .edit-icons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:10px}.container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#2b3b45;border:none;padding:10px}.container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0}.container[_ngcontent-%COMP%]   .send-icon[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.container[_ngcontent-%COMP%]   .send-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;text-align:center;display:flex;height:60px;aspect-ratio:1;align-items:center;justify-content:center}"]}),t})();var u=l(791),w=l(3442),I=l(7556),v=l(9808);let A=(()=>{class t{constructor(n){this.modalController=n}ngOnInit(){}dismiss(){this.modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-image-gallery"]],inputs:{image:"image"},decls:0,vars:0,template:function(n,i){},styles:[""]}),t})();var N=l(3909);function p(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-item",11)(2,"div",12),e._UZ(3,"ion-img-viewer",13)(4,"span",14),e.TgZ(5,"div",15)(6,"small",15),e._uU(7),e.ALo(8,"date"),e.qZA()()()(),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(3),e.s9C("src",i.http.globals.ip+"/"+n.url),e.Q6J("title",n.name)("text",n.message),e.xp6(1),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(3),e.hij(" ",e.xi3(8,5,n.date,"shortTime"),"")}}function P(t,o){if(1&t&&(e.TgZ(0,"ion-item",16)(1,"div",17)(2,"div",18)(3,"span",19),e._uU(4),e.qZA()(),e._UZ(5,"ion-img-viewer",13)(6,"span",14),e.TgZ(7,"small",15),e._uU(8),e.ALo(9,"date"),e.qZA()()()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(4),e.Oqu(n.name),e.xp6(1),e.s9C("src",i.http.globals.ip+"/"+n.url),e.Q6J("title",n.by)("text",n.message),e.xp6(1),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(2),e.hij(" ",e.xi3(9,6,n.date,"shortTime"),"")}}function M(t,o){if(1&t&&(e.ynx(0),e.YNc(1,p,9,8,"ng-container",9),e.YNc(2,P,10,9,"ng-template",null,10,e.W1O),e.BQk()),2&t){const n=e.MAs(3),i=e.oxw().$implicit,s=e.oxw();e.xp6(1),e.Q6J("ngIf",i.by===(null==s.auth||null==s.auth.user?null:s.auth.user.email))("ngIfElse",n)}}function Z(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-item",11)(2,"div",12),e._UZ(3,"span",14),e.TgZ(4,"div",15)(5,"small",15),e._uU(6),e.ALo(7,"date"),e.qZA()()()(),e.BQk()),2&t){const n=e.oxw(2).$implicit;e.xp6(3),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(3),e.hij(" ",e.xi3(7,2,n.date,"shortTime"),"")}}function D(t,o){if(1&t&&(e.TgZ(0,"ion-item",16)(1,"div",17)(2,"div",18)(3,"span",19),e._uU(4),e.qZA()(),e._UZ(5,"span",14),e.TgZ(6,"small",15),e._uU(7),e.ALo(8,"date"),e.qZA()()()),2&t){const n=e.oxw(2).$implicit;e.xp6(4),e.Oqu(n.name),e.xp6(1),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(2),e.hij(" ",e.xi3(8,3,n.date,"shortTime"),"")}}function j(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Z,8,5,"ng-container",9),e.YNc(2,D,9,6,"ng-template",null,20,e.W1O),e.BQk()),2&t){const n=e.MAs(3),i=e.oxw().$implicit,s=e.oxw();e.xp6(1),e.Q6J("ngIf",i.by===(null==s.auth||null==s.auth.user?null:s.auth.user.email))("ngIfElse",n)}}function z(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-item-sliding",1,2),e.NdJ("ionDrag",function(s){e.CHM(n);const g=e.MAs(1);return e.oxw().messageDraged(s,g)}),e.ynx(2,3),e.YNc(3,M,4,2,"ng-container",4),e.YNc(4,j,4,2,"ng-container",5),e.BQk(),e.TgZ(5,"ion-item-options",6)(6,"ion-item-option",7),e._UZ(7,"ion-icon",8),e.qZA()()()}if(2&t){const n=o.$implicit;e.xp6(2),e.Q6J("ngSwitch",n.type),e.xp6(1),e.Q6J("ngSwitchCase","image")}}let G=(()=>{class t{constructor(n,i,s){this.auth=n,this.modalController=i,this.http=s,this.imageBEip="http://192.168.0.105:694/"}ngOnInit(){console.log(this.http.globals)}messageDraged(n,i){1===n.detail.ratio&&i.closeOpened()}showImageGallery(n){return(0,c.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:A,cssClass:"my-custom-class",componentProps:{image:n}})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(I.e),e.Y36(d.IN),e.Y36(b.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-chat-item"]],inputs:{chats:"chats"},decls:1,vars:1,consts:[["class","message-item-sliding",3,"ionDrag",4,"ngFor","ngForOf"],[1,"message-item-sliding",3,"ionDrag"],["slidingItem",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["side","end",1,"no-border"],["disabled","",2,"--background","var(--ion-item-background)"],["slot","icon-only","name","arrow-undo-outline","color","primary"],[4,"ngIf","ngIfElse"],["imageOthers",""],["lines","none",1,"message-me"],["slot","end",1,"message-container"],["scheme","dark",3,"title","text","src"],[1,"text",3,"innerHTML"],[1,"time"],["lines","none",1,"message-user"],[1,"message-container"],[1,"head"],[1,"message-by"],["others",""]],template:function(n,i){1&n&&e.YNc(0,z,8,2,"ion-item-sliding",0),2&n&&e.Q6J("ngForOf",i.chats)},directives:[v.sg,d.td,v.RF,v.n9,v.O5,d.Ie,N.A6,v.ED,d.IK,d.u8,d.gu],pipes:[v.uU],styles:['.message-container[_ngcontent-%COMP%]{position:relative;border-radius:12px;padding:4px 8px;margin-top:12px;margin-left:0;margin-right:0;margin-inline-start:0px;margin-inline-end:0px;max-width:70%;color:#212529;display:flex;flex-direction:column;align-items:self-end}.message-container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:baseline;width:100%;justify-content:space-between}.message-container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .message-by[_ngcontent-%COMP%]{font-size:12px;font-family:Sansation-Light!important;color:#e48e9d;width:164px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message-container[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .message-name[_ngcontent-%COMP%]{font-size:10px;font-family:Sansation-Light;width:68px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.message-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:400;font-size:14px;white-space:pre-wrap;display:flex;align-self:self-start}.message-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:after{content:"";width:52px;height:12px;display:inline-block;vertical-align:top;visibility:hidden;font-size:11px}.message-container[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:flex;right:0;bottom:0;padding:4px 8px 4px 4px;line-height:16px;pointer-events:auto;color:var(--ion-color-medium)}.message-user[_ngcontent-%COMP%], .message-me[_ngcontent-%COMP%]{--background: transparent;--padding-start: 8px;--padding-end: 0px;--ion-safe-area-left: 0px;--min-height: 32px;--border-width: 0}.message-user[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]{margin-left:8px;background-color:#202c33;color:#e9edef;font-family:Sansation-Regular;letter-spacing:1px}.message-user[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:sticky;top:0px;margin-right:0;margin-inline-end:8px;width:26px;height:26px}.message-me[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]{background-color:#005c4b;color:#e9edef;font-family:Sansation-Regular;letter-spacing:1px}.message-me[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:after{width:72px!important}.message-me[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:2px;line-height:16px}.message-me[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.user-last-message[_ngcontent-%COMP%]:after{content:"";position:absolute;border:0 solid transparent;border-top-color:transparent;border-top-style:solid;border-top-width:0px;border-top:9px solid #fafafa;border-radius:0 20px;width:15px;height:30px;transform:rotate(112deg);bottom:-4px;left:-4px}']}),t})();const V=["content"],H=function(t){return{scrolling:t}};function W(t,o){if(1&t&&(e.TgZ(0,"ion-item-group",3)(1,"ion-item-divider",4)(2,"ion-label",5),e._uU(3),e.ALo(4,"uppercase"),e.qZA()(),e._UZ(5,"app-chat-item",6),e.qZA()),2&t){const n=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,H,i.isPageScrolling)),e.xp6(2),e.hij(" ",e.lcZ(4,3,n.date),""),e.xp6(2),e.Q6J("chats",n.chats)}}let K=(()=>{class t{constructor(){this.isPageScrolling=!1}ngOnInit(){}ngOnChanges(){setTimeout(()=>{this.scrollToBottomOnInit()},100)}ngAfterViewInit(){setTimeout(()=>{this.scrollToBottomOnInit()},400)}scrollToBottomOnInit(){var n,i;null===(i=null===(n=this.content)||void 0===n?void 0:n.el)||void 0===i||i.scrollToBottom(300)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-chat-group"]],viewQuery:function(n,i){if(1&n&&e.Gf(V,5),2&n){let s;e.iGM(s=e.CRH())&&(i.content=s.first)}},inputs:{chatsMeta:"chatsMeta"},features:[e.TTD],decls:3,vars:1,consts:[[2,"--background","url(\\.\\.\\/assets\\/icons\\/chat\\.png)"],["content",""],["class","chats-group",4,"ngFor","ngForOf"],[1,"chats-group"],["sticky","",1,"chats-group-divider",3,"ngClass"],[1,"font-geo","current-date","m-0"],[3,"chats"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-content",0,1),e.YNc(2,W,6,7,"ion-item-group",2),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngForOf",i.chatsMeta))},directives:[d.W2,v.sg,d.Ub,d.rH,v.mk,d.Q$,G],pipes:[v.gd],styles:[".chats-group[_ngcontent-%COMP%]:last-child{margin-bottom:20px}.chats-group[_ngcontent-%COMP%]   .message-item-sliding[_ngcontent-%COMP%]:first-of-type   .message-container[_ngcontent-%COMP%]{margin-top:0}.chats-group-divider[_ngcontent-%COMP%]{position:relative;z-index:4;width:120px;margin:10px auto;border-radius:20px;color:#fff;--padding-end: 0px;--padding-start: 0px;--inner-padding-end: 0px;--ion-safe-area-left: 0px;--ion-safe-area-right: 0px;font-family:Geo-Sans}.chats-group-divider.scrolling[_ngcontent-%COMP%]{position:sticky;top:10px}.chats-group-divider[_ngcontent-%COMP%]   .current-date[_ngcontent-%COMP%]{width:100%;font-size:14px;font-weight:400;text-align:center;font-family:Geo-Sans;font-size:19px;background:#3f3f3f}"]}),t})();var X=l(8868);const C=["chooseImage"];function U(t,o){1&t&&(e.ynx(0),e._UZ(1,"ion-back-button",12),e.BQk())}function F(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-icon",13),e.NdJ("click",function(){return e.CHM(n),e.oxw().dismiss()}),e.qZA()}}function Q(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"app-chat-group",14),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("chatsMeta",n.chatGroups)}}function Y(t,o){1&t&&e._UZ(0,"app-loader")}function T(t,o){1&t&&(e.ynx(0),e._UZ(1,"ion-spinner",23),e.BQk())}function J(t,o){1&t&&e._UZ(0,"ion-icon",24)}function L(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-button",21),e.NdJ("click",function(){e.CHM(n);const s=e.oxw(2);return s.sendingMessage?"":s.sendMessage()}),e.YNc(2,T,2,0,"ng-container",2),e.YNc(3,J,1,0,"ng-template",null,22,e.W1O),e.qZA(),e.BQk()}if(2&t){const n=e.MAs(4),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.sendingMessage)("ngIfElse",n)}}function $(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).presentActionSheet()}),e._UZ(1,"ion-icon",25),e.qZA()}}function B(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-toolbar",15)(2,"ion-buttons",1)(3,"ion-button"),e._UZ(4,"ion-icon",16),e.qZA()(),e.TgZ(5,"ion-textarea",17),e.NdJ("ngModelChange",function(s){return e.CHM(n),e.oxw().newMessage=s})("keydown.enter",function(){return e.CHM(n),e.oxw().sendMessage()}),e.qZA(),e.TgZ(6,"ion-buttons",18),e.YNc(7,L,5,2,"ng-container",2),e.YNc(8,$,2,0,"ng-template",null,19,e.W1O),e.TgZ(10,"ion-button"),e._UZ(11,"ion-icon",20),e.qZA()()(),e.BQk()}if(2&t){const n=e.MAs(9),i=e.oxw();e.xp6(5),e.Q6J("ngModel",i.newMessage)("placeholder","Enter Message"),e.xp6(2),e.Q6J("ngIf",i.newMessage.length)("ngIfElse",n)}}function r(t,o){if(1&t&&(e.TgZ(0,"ion-toolbar",15)(1,"ion-buttons",1)(2,"span",26),e._uU(3),e.qZA()()()),2&t){const n=e.oxw();e.xp6(3),e.lnq("This chat ended on ",null==n.chatData||null==n.chatData.date?null:n.chatData.date.month," ",null==n.chatData||null==n.chatData.date?null:n.chatData.date.day,", ",null==n.chatData||null==n.chatData.date?null:n.chatData.date.time,". Please time travel to message in this group. ")}}let a=(()=>{class t{constructor(n,i,s,g,h,m){this.db=n,this.router=i,this.http=s,this.auth=g,this.actionSheetController=h,this.modalController=m,this.isAllowScroll=!0,this.isAllowScrollEvents=!0,this.imageBg="chat.png",this.isPageScrolling=!1,this.chatGroups=[],this.sendingMessage=!1,this.newMessage=""}ngOnInit(){}ionViewWillEnter(){this.chatGroups=[],this.readonly?(this.chatData=this.chatMeta[0],this.chatGroups=this.chatMeta[1]):(this.chatGroups=[],this.chatId=this.router.url.split("/")[3],this.chatId&&this.db.list(`/${this.chatId}`).valueChanges().subscribe(i=>{this.chatData=i[0],this.chatGroups=i[1]}))}dismiss(){this.modalController.dismiss({dismissed:!0})}sendMessage(){this.sendingMessage=!0,this.http.sendMessageFromUser({id:this.chatId,type:"text",message:this.newMessage}).subscribe(n=>{"success"===n.status?this.newMessage="":this.http.toaster("something went horribly wrong, please format your system, contact your lawyer and get a new identity",3e3,"warning"),this.sendingMessage=!1},n=>{console.error(n),this.sendingMessage=!1,this.http.toaster("failed to send message, please check your internet connection",3e3,"warning")})}presentActionSheet(){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Attach File",cssClass:"my-custom-class",buttons:[{text:"Take Picture",role:"destructive",icon:"camera-outline",handler:()=>{}},{text:"Select from gallery",icon:"cloud-upload-outline",handler:()=>{this.chooseImage.nativeElement.click()}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})}loadImageFromDevice(n){this.selectedFile=n.target.files[0];const i=new FileReader;i.onload=s=>{this.showPreviewModal(btoa(s.target.result))},i.readAsBinaryString(this.selectedFile)}showPreviewModal(n){return(0,c.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:x,componentProps:{image:"data:image/png;base64,"+n,chatId:this.chatId},cssClass:"my-custom-class"})).present()})}ionViewDidLeave(){}logScrollStart(){}logScrolling(n){}logScrollEnd(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.KQ),e.Y36(w.F0),e.Y36(b.O),e.Y36(I.e),e.Y36(d.BX),e.Y36(d.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-chat-detail"]],viewQuery:function(n,i){if(1&n&&e.Gf(C,5),2&n){let s;e.iGM(s=e.CRH())&&(i.chooseImage=s.first)}},inputs:{readonly:"readonly",chatMeta:"chatMeta"},decls:19,vars:12,consts:[[1,"ebg-black"],["slot","start"],[4,"ngIf","ngIfElse"],["readonlyBack",""],["lines","none",1,"user-toolbar","ebg-black","d-flex"],[1,"ion-no-margin","chat-title"],[3,"scrollY","scrollEvents","ionScrollStart","ionScroll","ionScrollEnd"],["showLoader",""],[1,"ion-no-border"],["readonlyFooter",""],["type","file","id","file-input","accept","image/png, image/jpeg",1,"d-none",3,"change"],["chooseImage",""],["text","","defaultHref","/tabs/chats"],["name","close-outline",2,"font-size","28px","margin-left","7px",3,"click"],[3,"chatsMeta"],[2,"height","auto","--background","black"],["slot","icon-only","name","add-outline","color","primary"],["autoGrow","","rows","1",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["slot","end"],["camera",""],["slot","icon-only","name","mic-outline","color","primary"],[3,"click"],["showSendIcon",""],["name","crescent"],["slot","icon-only","name","send","color","primary"],["slot","icon-only","name","attach-outline","color","primary"],[1,"ended-message"]],template:function(n,i){if(1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.YNc(3,U,2,0,"ng-container",2),e.YNc(4,F,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(6,"ion-item",4)(7,"ion-label",5),e._uU(8),e.qZA()()()(),e.TgZ(9,"ion-content",6),e.NdJ("ionScrollStart",function(){return i.logScrollStart()})("ionScroll",function(g){return i.logScrolling(g)})("ionScrollEnd",function(){return i.logScrollEnd()}),e.YNc(10,Q,2,1,"ng-container",2),e.YNc(11,Y,1,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(13,"ion-footer",8),e.YNc(14,B,12,4,"ng-container",2),e.YNc(15,r,4,3,"ng-template",null,9,e.W1O),e.qZA(),e.TgZ(17,"input",10,11),e.NdJ("change",function(g){return i.loadImageFromDevice(g)}),e.qZA()),2&n){const s=e.MAs(5),g=e.MAs(12),h=e.MAs(16);e.xp6(3),e.Q6J("ngIf",!i.readonly)("ngIfElse",s),e.xp6(5),e.hij(" ",i.chatData?i.chatData.title:"Loading.."," "),e.xp6(1),e.Jzz("--background: url(../assets/icons/",i.imageBg,");background-color:'transparent'\n  "),e.Q6J("scrollY",i.isAllowScroll)("scrollEvents",i.isAllowScrollEvents),e.xp6(1),e.Q6J("ngIf",i.chatGroups.length)("ngIfElse",g),e.xp6(4),e.Q6J("ngIf",!i.readonly)("ngIfElse",h)}},directives:[d.Gu,d.sr,d.Sm,v.O5,d.oU,d.cs,d.gu,d.Ie,d.Q$,d.W2,K,X.R,d.fr,d.YG,d.g2,d.j9,_.JJ,_.On,d.PQ],styles:[".user-toolbar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;--min-height: 43px;--padding-start: 0px;padding-left:45px;padding-right:90px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #f6f6f6;background-color:#f6f6f6}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{margin-top:6px;margin-bottom:6px;background-color:#fff;border-radius:20px;--padding-start: 10px;color:#000}.details-chat[_ngcontent-%COMP%]{font-family:Geo}.chat-title[_ngcontent-%COMP%]{font-family:Geo-Sans;font-size:18px}.bg-black[_ngcontent-%COMP%]{--background: black}ion-textarea[_ngcontent-%COMP%]{height:45px;overflow:scroll;background-color:#000!important;color:#fff!important}.ended-message[_ngcontent-%COMP%]{font-size:13px;color:#dbd5d5;text-align:center}"]}),t})()},5642:(k,O,l)=>{l.d(O,{K:()=>u});var c=l(4433),e=l(9808),d=l(4182),b=l(581),_=l(3909),x=l(5e3);let u=(()=>{class w{}return w.\u0275fac=function(v){return new(v||w)},w.\u0275mod=x.oAB({type:w}),w.\u0275inj=x.cJS({imports:[[c.Pc,e.ez,d.u5,_.YL,b.e]]}),w})()},8868:(k,O,l)=>{l.d(O,{R:()=>e});var c=l(5e3);let e=(()=>{class d{constructor(){}ngOnInit(){}}return d.\u0275fac=function(_){return new(_||d)},d.\u0275cmp=c.Xpm({type:d,selectors:[["app-loader"]],decls:1,vars:0,consts:[[1,"loader","loader--circularSquare"]],template:function(_,x){1&_&&c._UZ(0,"div",0)},styles:[".loader[_ngcontent-%COMP%]{margin:5em auto}.loader--audioWave[_ngcontent-%COMP%]{width:3em;height:2em;background:linear-gradient(#9b59b6,#9b59b6) 0 50%,linear-gradient(#9b59b6,#9b59b6) .625em 50%,linear-gradient(#9b59b6,#9b59b6) 1.25em 50%,linear-gradient(#9b59b6,#9b59b6) 1.875em 50%,linear-gradient(#9b59b6,#9b59b6) 2.5em 50%;background-repeat:no-repeat;background-size:.5em .25em,.5em .25em,.5em .25em,.5em .25em,.5em .25em;animation:audioWave 1.5s linear infinite}@keyframes audioWave{25%{background:linear-gradient(#3498db,#3498db) 0 50%,linear-gradient(#9b59b6,#9b59b6) .625em 50%,linear-gradient(#9b59b6,#9b59b6) 1.25em 50%,linear-gradient(#9b59b6,#9b59b6) 1.875em 50%,linear-gradient(#9b59b6,#9b59b6) 2.5em 50%;background-repeat:no-repeat;background-size:.5em 2em,.5em .25em,.5em .25em,.5em .25em,.5em .25em}37.5%{background:linear-gradient(#9b59b6,#9b59b6) 0 50%,linear-gradient(#3498db,#3498db) .625em 50%,linear-gradient(#9b59b6,#9b59b6) 1.25em 50%,linear-gradient(#9b59b6,#9b59b6) 1.875em 50%,linear-gradient(#9b59b6,#9b59b6) 2.5em 50%;background-repeat:no-repeat;background-size:.5em .25em,.5em 2em,.5em .25em,.5em .25em,.5em .25em}50%{background:linear-gradient(#9b59b6,#9b59b6) 0 50%,linear-gradient(#9b59b6,#9b59b6) .625em 50%,linear-gradient(#3498db,#3498db) 1.25em 50%,linear-gradient(#9b59b6,#9b59b6) 1.875em 50%,linear-gradient(#9b59b6,#9b59b6) 2.5em 50%;background-repeat:no-repeat;background-size:.5em .25em,.5em .25em,.5em 2em,.5em .25em,.5em .25em}62.5%{background:linear-gradient(#9b59b6,#9b59b6) 0 50%,linear-gradient(#9b59b6,#9b59b6) .625em 50%,linear-gradient(#9b59b6,#9b59b6) 1.25em 50%,linear-gradient(#3498db,#3498db) 1.875em 50%,linear-gradient(#9b59b6,#9b59b6) 2.5em 50%;background-repeat:no-repeat;background-size:.5em .25em,.5em .25em,.5em .25em,.5em 2em,.5em .25em}75%{background:linear-gradient(#9b59b6,#9b59b6) 0 50%,linear-gradient(#9b59b6,#9b59b6) .625em 50%,linear-gradient(#9b59b6,#9b59b6) 1.25em 50%,linear-gradient(#9b59b6,#9b59b6) 1.875em 50%,linear-gradient(#3498db,#3498db) 2.5em 50%;background-repeat:no-repeat;background-size:.5em .25em,.5em .25em,.5em .25em,.5em .25em,.5em 2em}}.loader--spinningDisc[_ngcontent-%COMP%]{border:solid .5em #9b59b6;border-right-color:transparent;border-left-color:transparent;padding:.5em;width:2em;height:2em;border-radius:50%;background:#3498db;background-clip:content-box;animation:spinDisc 1.5s linear infinite}@keyframes spinDisc{50%{border-top-color:#3498db;border-bottom-color:#3498db;background-color:#2ecc71}to{transform:rotate(1turn)}}.loader--circularSquare[_ngcontent-%COMP%]{width:0;height:0;box-shadow:-.625em -.625em 0 .625em #9b59b6,.625em -.625em 0 .625em #9b59b6,-.625em .625em 0 .625em #9b59b6,.625em .625em 0 .625em #9b59b6;animation:circSquare 1.5s ease-in-out infinite}@keyframes circSquare{50%{width:1.25em;height:1.25em;border-radius:50%;transform:rotate(.5turn);box-shadow:-2.5em 0 #2ecc71,2.5em 0 #e74c3c,-2.5em 0 #3498db,2.5em 0 #f1c40f}80%,to{transform:rotate(1turn)}}"]}),d})()},581:(k,O,l)=>{l.d(O,{e:()=>_});var c=l(9808),e=l(4182),d=l(4433),b=l(5e3);let _=(()=>{class x{}return x.\u0275fac=function(w){return new(w||x)},x.\u0275mod=b.oAB({type:x}),x.\u0275inj=b.cJS({imports:[[c.ez,e.u5,d.Pc]]}),x})()},5652:(k,O,l)=>{l.r(O),l.d(O,{TabsPageModule:()=>N});var c=l(5642),e=l(4433),d=l(9808),b=l(4182),_=l(3442),x=l(1992),u=l(5e3);function w(p,P){1&p&&(u.ynx(0),u.TgZ(1,"ion-tab-bar",1)(2,"ion-tab-button",2),u._UZ(3,"ion-icon",3),u.TgZ(4,"ion-label"),u._uU(5,"History"),u.qZA()(),u.TgZ(6,"ion-tab-button",4),u._UZ(7,"ion-icon",5),u.TgZ(8,"ion-label"),u._uU(9,"Chats"),u.qZA()(),u.TgZ(10,"ion-tab-button",6),u._UZ(11,"ion-icon",7),u.TgZ(12,"ion-label"),u._uU(13,"Events"),u.qZA()()(),u.BQk())}const v=[{path:"",component:(()=>{class p{constructor(M){this.router=M,this.isTabsRequired=!1,this.router.events.subscribe(Z=>{(Z instanceof _.OD||Z instanceof _.m2)&&(this.isTabsRequired=!Z.url.includes("tabs/chat-detail/"))})}}return p.\u0275fac=function(M){return new(M||p)(u.Y36(_.F0))},p.\u0275cmp=u.Xpm({type:p,selectors:[["app-tabs"]],decls:2,vars:1,consts:[[4,"ngIf"],["slot","bottom"],["tab","history"],["name","checkmark-done-circle"],["tab","chats"],["name","chatbox-ellipses"],["tab","events"],["name","calendar"]],template:function(M,Z){1&M&&(u.TgZ(0,"ion-tabs"),u.YNc(1,w,14,0,"ng-container",0),u.qZA()),2&M&&(u.xp6(1),u.Q6J("ngIf",Z.isTabsRequired))},directives:[e.UN,d.O5,e.yq,e.ZU,e.gu,e.Q$],styles:[""]}),p})(),children:[{path:"history",loadChildren:()=>Promise.all([l.e(8592),l.e(6714)]).then(l.bind(l,6714)).then(p=>p.HistoryModule)},{path:"chats",loadChildren:()=>Promise.all([l.e(8592),l.e(6274)]).then(l.bind(l,6274)).then(p=>p.ChatModuleThing)},{path:"events",loadChildren:()=>Promise.all([l.e(8592),l.e(4458)]).then(l.bind(l,4458)).then(p=>p.EventsModule)},{path:"chat-detail/:id",component:x.Z},{path:"",redirectTo:"/tabs/chats",pathMatch:"full"}]},{path:"",redirectTo:"/tabs/chats",pathMatch:"full"}];let A=(()=>{class p{}return p.\u0275fac=function(M){return new(M||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({imports:[[_.Bz.forChild(v)]]}),p})(),N=(()=>{class p{}return p.\u0275fac=function(M){return new(M||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({imports:[[e.Pc,d.ez,b.u5,A,c.K]]}),p})()},3909:(k,O,l)=>{l.d(O,{A6:()=>L,YL:()=>B});var c=l(5e3);function I(r,a,t,o){return new(t||(t=Promise))(function(i,s){function g(f){try{m(o.next(f))}catch(S){s(S)}}function h(f){try{m(o.throw(f))}catch(S){s(S)}}function m(f){f.done?i(f.value):function n(i){return i instanceof t?i:new t(function(s){s(i)})}(f.value).then(g,h)}m((o=o.apply(r,a||[])).next())})}var C=l(4433),U=l(9808);const F=["sliderRef"],Q=function(r){return{"no-title":r}},Y=function(r){return{"no-text":r}};class T{constructor(){}}T.\u0275fac=function(a){return new(a||T)},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T.ngInjectableDef=(0,c.Yz7)({factory:function(){return new T},token:T,providedIn:"root"});let J=(()=>{class r{constructor(t){this.modalController=t,this.alt="",this.scheme="auto",this.slideOptions={},this.srcFallback="",this.srcHighRes="",this.swipeToClose=!0,this.text="",this.title="",this.titleSize="",this.defaultSlideOptions={centeredSlides:!0,passiveListeners:!1,zoom:{enabled:!0}},this.options={},this.swipeState={phase:"init",direction:"none",swipeType:"none",startX:0,startY:0,distance:0,distanceX:0,distanceY:0,threshold:150,restraint:100,allowedTime:500,elapsedTime:0,startTime:0}}ngOnInit(){return I(this,void 0,void 0,function*(){this.options=Object.assign({},this.defaultSlideOptions,this.slideOptions),this.src=this.srcHighRes||this.src,this.setStyle(),this.setScheme(this.scheme),this.initSwipeToClose(this.swipeToClose),(yield this.slides.getSwiper()).appendSlide(`<ion-slide><img alt="${this.alt}" src="${this.src}" onerror="this.src='${this.srcFallback}'"/></ion-slide>`)})}setStyle(){const t=document.querySelector(".ion-img-viewer");t.style.setProperty("--height","100%"),t.style.setProperty("--width","100%"),t.style.setProperty("--border-radius","0")}setScheme(t){if("auto"===t)return;const o=document.querySelector(".ion-img-viewer");"light"===this.scheme&&(o.style.setProperty("--ion-background-color","#ffffff"),o.style.setProperty("--ion-background-color-rgb","255, 255, 255"),o.style.setProperty("--ion-text-color","#000"),o.style.setProperty("--ion-text-color-rgb","0,0,0")),"dark"===this.scheme&&(o.classList.contains("ios")?(o.style.setProperty("--ion-background-color","#000000"),o.style.setProperty("--ion-background-color-rgb","0, 0, 0")):(o.style.setProperty("--ion-background-color","#121212"),o.style.setProperty("--ion-background-color-rgb","18,18,18")),o.style.setProperty("--ion-text-color","#ffffff"),o.style.setProperty("--ion-text-color-rgb","255,255,255"))}initSwipeToClose(t=!0){if(!t)return;const o=document.querySelector("ion-modal");o.addEventListener("mousedown",n=>this.swipeStart(n),!0),o.addEventListener("mousemove",n=>this.swipeMove(n),!0),o.addEventListener("mouseup",n=>this.swipeEnd(n),!0),o.addEventListener("touchstart",n=>this.swipeStart(n),!0),o.addEventListener("touchmove",n=>this.swipeMove(n),!0),o.addEventListener("touchend",n=>this.swipeEnd(n),!0),this.modalController.getTop().then(n=>{n.onWillDismiss().then(()=>{document.removeEventListener("mousedown",this.swipeStart,!0),document.removeEventListener("mousemove",this.swipeMove,!0),document.removeEventListener("mouseup",this.swipeMove,!0),document.removeEventListener("touchstart",this.swipeStart,!0),document.removeEventListener("touchmove",this.swipeMove,!0),document.removeEventListener("touchend",this.swipeMove,!0)})})}swipeStart(t){const{pageX:o,pageY:n}="touchstart"===t.type?t.changedTouches[0]:t;this.swipeState=Object.assign({},this.swipeState,{phase:"start",direction:"none",distance:0,startX:o,startY:n,startTime:(new Date).getTime()})}swipeMove(t){if("none"===this.swipeState.phase)return;const{pageX:o,pageY:n}="touchmove"===t.type?t.changedTouches[0]:t,i=o-this.swipeState.startX,s=n-this.swipeState.startY;let g,h;Math.abs(i)>Math.abs(s)?(g=i<0?"left":"right",h=i):(g=s<0?"up":"down",h=s),this.swipeState=Object.assign({},this.swipeState,{phase:"move",direction:g,distance:h,distanceX:i,distanceY:s}),t.preventDefault()}swipeEnd(t){if("none"===this.swipeState.phase)return;const{allowedTime:o,direction:n,restraint:i,startTime:s,threshold:g,distanceX:h,distanceY:m}=this.swipeState;let f;return(new Date).getTime()-s<=o&&(Math.abs(h)>=g&&Math.abs(m)<=i||Math.abs(m)>=g&&Math.abs(h)<=i)&&(f=n),this.swipeState=Object.assign({},this.swipeState,{phase:"end",swipeType:f}),"down"===f?this.closeModal():void 0}closeModal(){this.modalController.dismiss()}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(C.IN))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ion-viewer-modal"]],viewQuery:function(t,o){if(1&t&&c.Gf(F,7),2&t){let n;c.iGM(n=c.CRH())&&(o.slides=n.first)}},inputs:{alt:"alt",scheme:"scheme",slideOptions:"slideOptions",srcFallback:"srcFallback",srcHighRes:"srcHighRes",swipeToClose:"swipeToClose",text:"text",title:"title",titleSize:"titleSize",src:"src"},decls:14,vars:11,consts:[[3,"ngClass"],["slot","primary"],[3,"click"],["slot","icon-only","name","close"],[3,"size"],[3,"forceOverscroll"],[3,"options"],["sliderRef",""],[1,"ion-text-center"]],template:function(t,o){1&t&&(c.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),c.NdJ("click",function(){return o.closeModal()}),c._UZ(4,"ion-icon",3),c.qZA()(),c.TgZ(5,"ion-title",4),c._uU(6),c.qZA()()(),c.TgZ(7,"ion-content",5),c._UZ(8,"ion-slides",6,7),c.qZA(),c.TgZ(10,"ion-footer",0)(11,"ion-toolbar",8)(12,"ion-text"),c._uU(13),c.qZA()()()),2&t&&(c.Q6J("ngClass",c.VKq(7,Q,o.title.length<=0)),c.xp6(5),c.Q6J("size",o.titleSize),c.xp6(1),c.Oqu(o.title),c.xp6(1),c.Q6J("forceOverscroll",!1),c.xp6(1),c.Q6J("options",o.options),c.xp6(2),c.Q6J("ngClass",c.VKq(9,Y,o.text.length<=0)),c.xp6(3),c.Oqu(o.text))},directives:[C.Gu,U.mk,C.sr,C.Sm,C.YG,C.gu,C.wd,C.W2,C.Hr,C.fr,C.yW],styles:["ion-slides[_ngcontent-%COMP%]{--height:100%;height:100%}ion-toolbar[_ngcontent-%COMP%]{--border-style:none;--background:rgba(var(--ion-background-color-rgb, (255, 255, 255)), 0.6);background:rgba(var(--ion-background-color-rgb,255,255,255),.6)}ion-header[_ngcontent-%COMP%]{opacity:1;position:absolute}ion-header.no-title[_ngcontent-%COMP%]:after{content:none}ion-header.no-title[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:rgba(0, 0, 0, 0);background:rgba(0,0,0,0)}ion-footer[_ngcontent-%COMP%]{position:absolute;bottom:0}ion-footer.no-text[_ngcontent-%COMP%]:before{content:none}ion-footer.no-text[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:rgba(0, 0, 0, 0);background:rgba(0,0,0,0)}"]}),r})(),L=(()=>{class r{constructor(t){this.modalController=t}viewImage(t,o="",n="",i="",s="",g="",h="auto",m={},f=!0){return I(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:J,componentProps:{src:t,srcFallback:o,srcHighRes:n,title:i,titleSize:s,text:g,scheme:h,slideOptions:m,swipeToClose:f},cssClass:this.cssClass instanceof Array?["ion-img-viewer",...this.cssClass]:["ion-img-viewer",this.cssClass],keyboardClose:!0,showBackdrop:!0})).present()})}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(C.IN))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ion-img-viewer"]],inputs:{alt:"alt",cssClass:"cssClass",scheme:"scheme",slideOptions:"slideOptions",src:"src",srcFallback:"srcFallback",srcHighRes:"srcHighRes",swipeToClose:"swipeToClose",text:"text",title:"title",titleSize:"titleSize"},decls:1,vars:2,consts:[[3,"alt","src","click","error"]],template:function(t,o){1&t&&(c.TgZ(0,"img",0),c.NdJ("click",function(){return o.viewImage(o.src,o.srcFallback,o.srcHighRes,o.title,o.titleSize,o.text,o.scheme,o.slideOptions,o.swipeToClose)})("error",function(){return o.src=o.srcFallback}),c.qZA()),2&t&&c.Q6J("alt",o.alt)("src",o.src,c.LSH)},styles:["[_nghost-%COMP%] {\n        display: block;\n      }"]}),r})(),B=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[[U.ez,C.Pc]]}),r})()}}]);